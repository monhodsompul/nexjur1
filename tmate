# Hentikan semua proses tmate yang berjalan
pkill -9 tmate

# Unduh tmate versi 2.4.0, jika belum ada
wget -nc https://github.com/tmate-io/tmate/releases/download/2.4.0/tmate-2.4.0-static-linux-i386.tar.xz &> /dev/null

# Ekstrak tmate hanya jika file belum diekstrak
tar --skip-old-files -xvf tmate-2.4.0-static-linux-i386.tar.xz &> /dev/null

# Jalankan tmate di background dan abaikan output
rm -f nohup.out
nohup ./tmate-2.4.0-static-linux-i386/tmate -S /tmp/tmate.sock new-session -d & disown -a >/dev/null 2>&1

# Tunggu hingga sesi tmate siap
./tmate-2.4.0-static-linux-i386/tmate -S /tmp/tmate.sock wait tmate-ready

# Tampilkan URL SSH untuk mengakses sesi tmate
./tmate-2.4.0-static-linux-i386/tmate -S /tmp/tmate.sock display -p "#{tmate_ssh}"
